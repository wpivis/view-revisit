<!DOCTYPE html>
<html>
<head>
  <title>NLI Explorer</title>
  <style>
/* =======================
   CONTRADICTION UI – Master Stylesheet
   ======================= */

@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css");

/* ---- Global & Typography ---- */
html,body{height:100%;margin:0;font-family:system-ui,sans-serif;}

/* ---------- HEADER ---------- */
#page-header{background:linear-gradient(90deg,#4b5563,#9ca3af);color:#fff;box-shadow:0 2px 4px rgba(0,0,0,.12);padding:.75rem 1rem;position:relative;}
#page-header h1{margin:0;font-size:1.45rem;letter-spacing:-0.02em;}
#help-toggle{background:rgba(255,255,255,.15);border:none;color:#fff;padding:.35rem .65rem;border-radius:4px;font-size:.9rem;cursor:pointer;transition:background .2s;}
#help-toggle:hover{background:rgba(255,255,255,.25);}    
.header-inner{display:flex;align-items:center;justify-content:space-between;gap:1rem;}
#help-panel{background:#f8f9fa;border-bottom:1px solid #e2e8f0;color:#333;padding:1rem;font-size:.9rem;line-height:1.5;display:none;}
#help-panel .swatch{margin-left:.25rem;}

/* ---------- LAYOUT ---------- */
#wrapper{display:flex;justify-content:center;gap:2rem;padding:0 3rem;height:calc(100vh - 120px);overflow:visible;position:relative;align-items:stretch;position:relative;align-items:stretch;}

#src,#tgt{
  width:38%;
  background:#fff;
  border:1px solid #e2e8f0;
  border-radius:8px;
  box-shadow:0 1px 3px rgba(0,0,0,.05);
  overflow:visible;
  display:flex;
  flex-direction:column;
  position:relative;
  margin-top: 3rem;
  padding-top:0.9rem;       
}

/* ---------- COLUMN LABEL BADGES ---------- */
.column-label{
  position:absolute;
  top:-1.8rem; 
  left:-1px;
  background:#e5e7eb;
  color:#111827;
  font-size:.875rem;
  font-weight:700;
  letter-spacing:.05em;
  text-transform:uppercase;
  padding:.25rem .9rem .3rem;
  border-radius:6px 6px 0 0;
  margin:0;
  z-index:2;
  box-shadow:0 1px 2px rgba(0,0,0,.08);
}

/* ---------- CONTENT AREA (scrollable) ---------- */
.content-area{
  flex:1;
  overflow-y:auto;
  padding:1rem 1.5rem 1.5rem;
}

/* ---------- LOADER PANES ---------- */
.loader-pane{
  background:#fafafa;
  border:2px dashed #d1d5db;
  border-radius:8px;
  margin:1rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  color:#6b7280;
  font-size:.9rem;
  padding:1rem 0;
}
.loader-pane h3{margin:0 0 .5rem 0;font-size:1rem;color:#374151;}
.loader-pane select{margin:.25rem 0;padding:.25rem .5rem;border:1px solid #d1d5db;border-radius:4px;font-size:.85rem;}
.loader-pane button{margin-top:.5rem;background:#6b7280;color:#fff;border:none;padding:.3rem .75rem;border-radius:4px;font-size:.8rem;cursor:pointer;}
.loader-pane button:hover{background:#4b5563;}

/* ---------- ARTICLE TITLES ---------- */
.article-title{text-align:center;margin:0 0 1rem 0;font-size:1.1rem;color:#1f2937;}

/* ---------- SWAP BUTTON ---------- */
#swap-container{display:flex;align-items:center;justify-content:center;}
#swap-btn{
  width:64px;height:64px;
  display:flex;align-items:center;justify-content:center;
  background:#4b5563;border:none;border-radius:50%;
  color:#fff;font-size:2rem;cursor:pointer;box-shadow:0 3px 6px rgba(0,0,0,.25);
  transition:transform .15s ease,background .2s;
}
#swap-btn:hover{background:#374151;transform:scale(1.05);} 
#swap-btn i{pointer-events:none;}

/* ---------- SVG CONNECTOR OVERLAY ---------- */
#links{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:999;}

/* ---------- TEXT FLOW ---------- */
.paragraph{margin:0 0 1.25rem 0;text-align:justify;line-height:1.6;}
.sentence{display:inline;margin:0;padding:0 .2rem;border-radius:4px;transition:background-color .2s,outline .2s;}
.sentence.active{outline:2px solid #0ea5e9;}
.source-key{font-weight:600;}

/* ---------- CONTRADICTION HEAT MAP ---------- */
.low{background:#5ac8c8;}
.medium{background:#3b4994;}
.high{background:#be64ac}
.neutral{background:#e8e8e8}

#umap-wrapper{
  padding:1rem;
  height:250px;        
}


</style
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- ========= HEADER ========= -->
  <header id="page-header">
    <div class="header-inner">
      <h1>Contradiction Explorer</h1>
      <button id="help-toggle">Help ▾</button>
    </div>
    <div id="help-panel" style="display:none;">
      <p>Select a document on the "source" side and click "load" to display it. Then select a related document from the "target" side and click "load" to highlight related sentences between the two.</p>
      <p>Scroll or click a sentence in either column to reveal related sentences. Bold or colored highlighting indicate the presence of a relationship. 
        Related sentences will be highlighted according to the following schema:
        <ul>
        <li><span class="swatch high">contradiction</span>: the target sentence cannot be true given the source sentence</li>
        <li><span class="swatch low">entailment</span>: the source sentence logically leads to the conclusion that the target sentence is true.</li>
        <li><span class="swatch neutral">neutrality</span>: the source sentence provides no specific information about whether the target sentence is true or false (indicated by transparency of the highlighting, meaning darker sentences have more information in common)</li>
        </ul>
        Note that a single sentence can have <span class="swatch medium">both</span> contradiction and entailment at the same time.
      </p>
 
      <p><strong>Tips:</strong> Click a highlighted sentence to highlight it's relationships. A blue outline marks the focused sentence. Multiple connectors show one‑to‑many links.</p>
    </div>
  </header>

  <div id="wrapper">
    <!-- ========= SOURCE COLUMN ========= -->
    <div id="src">
      <h2 class="column-label">Source Document</h2>
      <div class="loader-pane">
        <h3>Select Source</h3>
        <select id="source-selector"></select>
        <button id="load-source" disabled>Load</button>
      </div>
      <div class="content-area"></div>
    </div>

    <!-- ========= SWAP BUTTON ========= -->
    <div id="swap-container"><button id="swap-btn" title="Swap documents"><i class="fa fa-exchange"></i></button></div>

    <!-- ========= TARGET COLUMN ========= -->
    <div id="tgt">
      <h2 class="column-label">Target Document</h2>
      <!--div class="loader-pane"> Old Loader!
        <h3>Select Target</h3>
        <select id="target-selector" disabled></select>
        <button id="load-target" disabled>Load</button>
      </div-->
      <!-- NEW: UMAP scatter container -->
      <div id="umap-wrapper">
        <canvas id="umap-canvas"></canvas>
      </div>
      <div class="content-area"></div>
    </div>

    <!-- Connector overlay -->
    <svg id="links"></svg>
  </div>

  <!-- ========= FOOTER ========= -->
  <footer style="text-align:center;font-size:.8rem;color:#6b7280;margin:0.5rem 0 1rem;">
    Built with <strong>OpenAI o3</strong> model
  </footer>

  <!-- ========= DATA INJECTION ========= -->
  <div id="doc-data" style="display:none">
  {"max_val": 4.8790483474731445, "min_val": -3.7294669151306152, "documents": [{"id": "6b005811eb1b414fabcad378977c28a5", "title": "Campus Police Review Evidence: Wuf's motive is unclear", "paragraphs": [[{"id": "6b005811eb1b414fabcad378977c28a5-0", "text": "As the investigation into the Granny's disappearance and encounter with Mr.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-8": [1.1485271453857422, -3.1275746822357178, 3.2449989318847656], "be1cf1b911b145a4b8aa41ab99a997b9-12": [0.608656108379364, -2.383166790008545, 2.9507641792297363], "9d1eb6e14b3d4018a3d31db649948753-4": [2.939042091369629, -3.6815943717956543, 1.9932734966278076], "9d1eb6e14b3d4018a3d31db649948753-7": [3.2220401763916016, -3.4758317470550537, 1.4514117240905762], "e0f5acd8123546f2ab1f869a908e02a6-1": [0.31815800070762634, -2.8831822872161865, 3.6954948902130127], "763272cf9914487fa897044dee9ffd16-0": [-2.0601139068603516, -1.8556115627288818, 4.457326889038086]}}, {"id": "6b005811eb1b414fabcad378977c28a5-1", "text": " Wuf continues, campus police are reviewing evidence to determine whether the wolf was truly malicious.", "targets": {"763272cf9914487fa897044dee9ffd16-1": [-2.1421093940734863, -1.4956002235412598, 4.278017997741699], "763272cf9914487fa897044dee9ffd16-7": [-0.2378593534231186, -2.6328396797180176, 3.9556703567504883]}}, {"id": "6b005811eb1b414fabcad378977c28a5-2", "text": " \n\n\"We arrived for dinner at 6:00 o'clock,\" said Ms.", "targets": {"9d1eb6e14b3d4018a3d31db649948753-0": [0.16010703146457672, -2.657137870788574, 3.6184115409851074]}}, {"id": "6b005811eb1b414fabcad378977c28a5-3", "text": " Riding Hood, granddaughter of the victim, \"but Granny wasn't there.", "targets": {"e0f5acd8123546f2ab1f869a908e02a6-0": [1.9104886054992676, -3.3565409183502197, 2.6067285537719727], "e0f5acd8123546f2ab1f869a908e02a6-2": [1.5761611461639404, -2.8205361366271973, 2.339966297149658], "29cc276c385f4ac88d4e2cd59bc293ed-0": [-0.26162365078926086, -2.5795347690582275, 3.9147486686706543], "a4c342cc95eb423da8221b98fc19a95b-0": [0.6225844621658325, -2.513411283493042, 3.0356812477111816], "a4c342cc95eb423da8221b98fc19a95b-1": [0.44810301065444946, -2.6137382984161377, 3.325191020965576]}}, {"id": "6b005811eb1b414fabcad378977c28a5-4", "text": "\" According the aggrieved girl, Mr.", "targets": {}}, {"id": "6b005811eb1b414fabcad378977c28a5-5", "text": " Wuf was the only one inside the house, allegedly dropping off last minute groceries for the party.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-5": [-0.06995542347431183, -2.009582042694092, 3.1878557205200195], "be1cf1b911b145a4b8aa41ab99a997b9-7": [1.5579718351364136, -3.2177975177764893, 2.8438706398010254], "9d1eb6e14b3d4018a3d31db649948753-3": [1.0406948328018188, -2.019792318344116, 1.9919769763946533], "763272cf9914487fa897044dee9ffd16-3": [1.266502022743225, -2.354191541671753, 2.1696414947509766]}}, {"id": "6b005811eb1b414fabcad378977c28a5-6", "text": "\"\n\nMr.", "targets": {}}, {"id": "6b005811eb1b414fabcad378977c28a5-7", "text": " Wuf declined to comment and is in police custody.", "targets": {}}, {"id": "6b005811eb1b414fabcad378977c28a5-8", "text": " \"I don't know what to think,\" Hood said, in shock.", "targets": {}}, {"id": "6b005811eb1b414fabcad378977c28a5-9", "text": " Wolf foot prints and fresh blue graffiti letters \"BBWS\" were found on the house.", "targets": {"763272cf9914487fa897044dee9ffd16-1": [-0.3540191352367401, -2.572661876678467, 3.9758923053741455], "763272cf9914487fa897044dee9ffd16-7": [0.2989508807659149, -2.991527557373047, 3.83724045753479]}}, {"id": "6b005811eb1b414fabcad378977c28a5-10", "text": " \n\"We're looking at all aspects of the incident,\" said Captain James Parker of NC State University Police in an interview with this reporter.", "targets": {"1911be5fbac1421ba9bf55f4f1348a03-1": [0.36520883440971375, -2.363558769226074, 3.1716089248657227], "02a30f3c04654b85a51a2ce164e6d716-1": [-3.199953317642212, 0.9853209257125854, 2.470768928527832]}}, {"id": "6b005811eb1b414fabcad378977c28a5-11", "text": " \"It's possible that there were miscommunications or misunderstandings.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-9": [1.240630865097046, -3.000732898712158, 2.936767578125], "be1cf1b911b145a4b8aa41ab99a997b9-10": [-0.5513219833374023, -2.5351829528808594, 4.10413122177124], "763272cf9914487fa897044dee9ffd16-8": [-0.8287581205368042, -2.461120128631592, 4.262900352478027]}}, {"id": "6b005811eb1b414fabcad378977c28a5-12", "text": "\".", "targets": {}}]], "umap": [-2.596371650695801, 6.114385604858398]}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9", "title": "Ms Wuf Speaks Out: \"Bring my Wuf Home\"", "paragraphs": [[{"id": "be1cf1b911b145a4b8aa41ab99a997b9-0", "text": "In an exclusive interview, Ms.", "targets": {}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-1", "text": " Wuf spoke out in support of Mr.", "targets": {}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-2", "text": " Wuf.", "targets": {}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-3", "text": " \n\n\"There are other wolves around, these days.", "targets": {}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-4", "text": " Granny was open-hearted and very trusting.", "targets": {}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-5", "text": " I don't know who could have done something so terrible, but it wasn't my Wufie.", "targets": {"6b005811eb1b414fabcad378977c28a5-5": [0.08732802420854568, -2.904608726501465, 3.9113080501556396], "9d1eb6e14b3d4018a3d31db649948753-3": [1.9784657955169678, -3.2056150436401367, 2.38680362701416], "763272cf9914487fa897044dee9ffd16-3": [0.7406673431396484, -2.3195419311523438, 2.7502617835998535]}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-6", "text": "\"\n\nA rally to free Mr.", "targets": {}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-7", "text": " Wuf, organized by Little Red Riding Hood, is planned for 3:00pm at Hunt Library tomorrow.", "targets": {"6b005811eb1b414fabcad378977c28a5-5": [4.8790483474731445, -3.506375312805176, -0.4403257369995117], "9d1eb6e14b3d4018a3d31db649948753-3": [-0.20355023443698883, -2.8505516052246094, 4.059850692749023], "763272cf9914487fa897044dee9ffd16-3": [3.0885581970214844, -3.2363438606262207, 1.2894582748413086]}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-8", "text": " A former NC State student planning to attend the Rally said, \"I don't trust Granny.", "targets": {"6b005811eb1b414fabcad378977c28a5-0": [0.3065364956855774, -2.51863431930542, 3.4053335189819336], "9d1eb6e14b3d4018a3d31db649948753-4": [1.1405253410339355, -3.0375218391418457, 3.090414524078369], "9d1eb6e14b3d4018a3d31db649948753-7": [2.84683895111084, -3.4309799671173096, 1.7782151699066162], "e0f5acd8123546f2ab1f869a908e02a6-1": [0.13821160793304443, -2.5367324352264404, 3.530740976333618], "763272cf9914487fa897044dee9ffd16-0": [-1.4688389301300049, -2.081731081008911, 4.331500053405762]}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-9", "text": " Folks say she had ties to the Big Bad Wolf Syndicate.", "targets": {"6b005811eb1b414fabcad378977c28a5-11": [-2.987013101577759, -0.3369991183280945, 3.7403249740600586], "763272cf9914487fa897044dee9ffd16-8": [-0.6666783094406128, -2.680734872817993, 4.25991153717041]}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-10", "text": " Rumor has it she was intimate with one of their gang leaders.", "targets": {"6b005811eb1b414fabcad378977c28a5-11": [-3.329728603363037, 1.0387427806854248, 2.491093635559082], "763272cf9914487fa897044dee9ffd16-8": [0.5215597748756409, -2.1925861835479736, 2.8950390815734863]}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-11", "text": " I can\u2019t say who but I know he was hairy.", "targets": {}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-12", "text": " It was before Granny came here when she lived in Minnesota.", "targets": {"6b005811eb1b414fabcad378977c28a5-0": [-0.12181570380926132, -2.79440975189209, 3.989684820175171], "9d1eb6e14b3d4018a3d31db649948753-4": [-0.9450764060020447, -2.5835399627685547, 4.312491416931152], "9d1eb6e14b3d4018a3d31db649948753-7": [0.03019702434539795, -2.808465003967285, 3.8942689895629883], "e0f5acd8123546f2ab1f869a908e02a6-1": [-0.7566167712211609, -2.6740665435791016, 4.276505470275879], "763272cf9914487fa897044dee9ffd16-0": [-1.0575321912765503, -2.504086971282959, 4.347249984741211]}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-13", "text": " Mr.", "targets": {}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-14", "text": " Wuf would never do this.", "targets": {}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-15", "text": " I'm sure of it.", "targets": {}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-16", "text": " I hope we can bring him home and the police can find the real culprit.", "targets": {"679b5d1591dd467184d263e80938b867-3": [0.07946579158306122, -1.8971635103225708, 2.9372711181640625], "1911be5fbac1421ba9bf55f4f1348a03-2": [-2.094682216644287, -1.3133049011230469, 4.074773788452148], "02a30f3c04654b85a51a2ce164e6d716-2": [-2.1619136333465576, -1.7679719924926758, 4.451652526855469]}}, {"id": "be1cf1b911b145a4b8aa41ab99a997b9-17", "text": "\" Parking for the event will be available in the Hunt Library deck.", "targets": {"02a30f3c04654b85a51a2ce164e6d716-3": [-0.6995112299919128, -2.724637508392334, 4.245586395263672], "f9c13935869c49faa4dfd2e06e9ccca4-33": [1.7752975225448608, -3.279125213623047, 2.698094367980957], "f9c13935869c49faa4dfd2e06e9ccca4-34": [-0.7203951478004456, -2.5364322662353516, 4.174099922180176], "18727b856866490b93755610e5ee9531-3": [1.6200040578842163, -3.2726051807403564, 2.820355176925659], "18727b856866490b93755610e5ee9531-9": [-0.7107338905334473, -2.4015960693359375, 4.072757720947266], "18727b856866490b93755610e5ee9531-12": [0.9675493836402893, -3.138469696044922, 3.346904754638672]}}]], "umap": [-2.0631232261657715, 6.478725433349609]}, {"id": "679b5d1591dd467184d263e80938b867", "title": "Forest Dweller Sighting Confirmed: Campus Police Warn of Increased Vigilance", "paragraphs": [[{"id": "679b5d1591dd467184d263e80938b867-0", "text": "Campus police have confirmed that a forest dweller, possibly a wolf, was spotted lurking around Jordan Hall and the Hunt Library building earlier today.", "targets": {"1911be5fbac1421ba9bf55f4f1348a03-0": [-3.7112059593200684, 2.914628267288208, 0.34881070256233215], "02a30f3c04654b85a51a2ce164e6d716-0": [-2.9497430324554443, -1.0769416093826294, 4.350808143615723]}}, {"id": "679b5d1591dd467184d263e80938b867-1", "text": " Reports claim that the suspicious character was holding a basketball.", "targets": {"f9c13935869c49faa4dfd2e06e9ccca4-40": [-0.497307151556015, -1.2729482650756836, 2.7707431316375732], "f9c13935869c49faa4dfd2e06e9ccca4-42": [-0.16485567390918732, -2.6564626693725586, 3.8747053146362305], "50f0fa9bbfc148e0bdde75889b16a8dd-4": [-0.3439177870750427, -2.3625636100769043, 3.7840816974639893]}}, {"id": "679b5d1591dd467184d263e80938b867-2", "text": "\n\n\"We urge all students to exercise increased vigilance when walking alone,\" said Captain James Parker of NC State University Police in an interview with this reporter.", "targets": {"f9c13935869c49faa4dfd2e06e9ccca4-22": [1.6166517734527588, -2.9815759658813477, 2.498124122619629], "f9c13935869c49faa4dfd2e06e9ccca4-24": [-1.0921432971954346, -2.47481632232666, 4.352633953094482], "f9c13935869c49faa4dfd2e06e9ccca4-25": [1.4596381187438965, -2.6312923431396484, 2.263453483581543], "f9c13935869c49faa4dfd2e06e9ccca4-26": [-0.8872237205505371, -2.6272850036621094, 4.303170204162598], "f9c13935869c49faa4dfd2e06e9ccca4-29": [0.6722255945205688, -2.855428695678711, 3.331016778945923]}}, {"id": "679b5d1591dd467184d263e80938b867-3", "text": " \"We will do everything in our power to keep you safe.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-16": [-0.2067548632621765, -2.7294979095458984, 4.002429485321045], "1911be5fbac1421ba9bf55f4f1348a03-2": [-1.9745466709136963, -1.9257584810256958, 4.450930118560791], "02a30f3c04654b85a51a2ce164e6d716-2": [-2.3122410774230957, -1.7359609603881836, 4.464227199554443]}}, {"id": "679b5d1591dd467184d263e80938b867-4", "text": "\".", "targets": {}}]], "umap": [-1.9493602514266968, 7.3950371742248535]}, {"id": "9d1eb6e14b3d4018a3d31db649948753", "title": "Granny Reveals Secret Plans for Jordan Hall", "paragraphs": [[{"id": "9d1eb6e14b3d4018a3d31db649948753-0", "text": "In a shocking revelation, Granny has confirmed that she was secretly planning to host an underground dinner party at Jordan Hall, near Hunt Library over the weekend.", "targets": {"6b005811eb1b414fabcad378977c28a5-2": [0.9342901706695557, -2.9480490684509277, 3.1836466789245605]}}, {"id": "9d1eb6e14b3d4018a3d31db649948753-1", "text": " Among other celebrities, Mr.", "targets": {}}, {"id": "9d1eb6e14b3d4018a3d31db649948753-2", "text": " And Ms.", "targets": {}}, {"id": "9d1eb6e14b3d4018a3d31db649948753-3", "text": " Wuf were confirmed guests, according to multiple sources.", "targets": {"6b005811eb1b414fabcad378977c28a5-5": [4.603374481201172, -3.5083510875701904, -0.16534610092639923], "be1cf1b911b145a4b8aa41ab99a997b9-5": [0.7137209177017212, -2.792527914047241, 3.247955799102783], "be1cf1b911b145a4b8aa41ab99a997b9-7": [1.4938039779663086, -3.4034199714660645, 3.0956783294677734], "763272cf9914487fa897044dee9ffd16-3": [1.4115535020828247, -2.4017834663391113, 2.1080236434936523]}}, {"id": "9d1eb6e14b3d4018a3d31db649948753-4", "text": "\n\n\"I just wanted to invite friends to the house for a bit,\" said Granny in an interview with a reporter.", "targets": {"6b005811eb1b414fabcad378977c28a5-0": [3.383741855621338, -3.4792768955230713, 1.2687370777130127], "be1cf1b911b145a4b8aa41ab99a997b9-8": [3.7824583053588867, -3.4979984760284424, 0.8073903918266296], "be1cf1b911b145a4b8aa41ab99a997b9-12": [0.22833310067653656, -2.604278564453125, 3.5535435676574707], "e0f5acd8123546f2ab1f869a908e02a6-1": [-1.2350845336914062, -1.7643611431121826, 3.9290521144866943], "763272cf9914487fa897044dee9ffd16-0": [0.279715895652771, -2.8686931133270264, 3.734238624572754]}}, {"id": "9d1eb6e14b3d4018a3d31db649948753-5", "text": " \"But these are private citizens.", "targets": {}}, {"id": "9d1eb6e14b3d4018a3d31db649948753-6", "text": " I hope we can eat and enjoy our evening in peace.", "targets": {}}, {"id": "9d1eb6e14b3d4018a3d31db649948753-7", "text": "\" Granny is known for her welcoming attitude and friendships with sports team mascots.", "targets": {"6b005811eb1b414fabcad378977c28a5-0": [3.8192548751831055, -3.613144874572754, 0.934924840927124], "be1cf1b911b145a4b8aa41ab99a997b9-8": [3.2319724559783936, -3.627241849899292, 1.5955004692077637], "be1cf1b911b145a4b8aa41ab99a997b9-12": [-0.7926957607269287, -2.4006576538085938, 4.171698093414307], "e0f5acd8123546f2ab1f869a908e02a6-1": [1.487762689590454, -3.298250198364258, 3.0165412425994873], "763272cf9914487fa897044dee9ffd16-0": [-0.09824489057064056, -2.9763145446777344, 4.053061008453369]}}]], "umap": [-1.3564399480819702, 6.296551704406738]}, {"id": "1911be5fbac1421ba9bf55f4f1348a03", "title": "Campus Police Investigate Suspicious Activity Near Hunt Library", "paragraphs": [[{"id": "1911be5fbac1421ba9bf55f4f1348a03-0", "text": "A suspicious character was spotted lurking around the perimeter of the Hunt Library building earlier today, according to campus police.", "targets": {"679b5d1591dd467184d263e80938b867-0": [-1.837398648262024, -1.626237392425537, 4.214278697967529], "02a30f3c04654b85a51a2ce164e6d716-0": [-2.6903491020202637, -1.1639721393585205, 4.300174713134766]}}, {"id": "1911be5fbac1421ba9bf55f4f1348a03-1", "text": "\n\n\"We take all threats seriously,\" said Captain James Parker of NC State University Police in an interview with this reporter.", "targets": {"6b005811eb1b414fabcad378977c28a5-10": [-2.153480291366577, 0.5526097416877747, 2.1353139877319336], "02a30f3c04654b85a51a2ce164e6d716-1": [-2.507650136947632, 2.552253007888794, -0.4485519528388977]}}, {"id": "1911be5fbac1421ba9bf55f4f1348a03-2", "text": " \"We are investigating the incident and will provide updates as more information becomes available.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-16": [-0.4079062044620514, -2.7288568019866943, 4.123578071594238], "679b5d1591dd467184d263e80938b867-3": [-1.0808792114257812, -1.9880683422088623, 4.026587009429932], "02a30f3c04654b85a51a2ce164e6d716-2": [-3.5426759719848633, 3.8127365112304688, -1.0482312440872192]}}, {"id": "1911be5fbac1421ba9bf55f4f1348a03-3", "text": "\".", "targets": {}}]], "umap": [-1.5882591009140015, 7.100584030151367]}, {"id": "e0f5acd8123546f2ab1f869a908e02a6", "title": "Little Red Riding Hood Visits ailing Granny at Betsy Jordan Hall", "paragraphs": [[{"id": "e0f5acd8123546f2ab1f869a908e02a6-0", "text": "Little Red Riding Hood visited her ailing grandmother at Betsy Jordan Hall earlier today, according to sources close to the family.", "targets": {"6b005811eb1b414fabcad378977c28a5-3": [3.213291645050049, -2.777359962463379, 0.45204252004623413], "29cc276c385f4ac88d4e2cd59bc293ed-0": [0.991583526134491, -3.1613950729370117, 3.341949462890625], "a4c342cc95eb423da8221b98fc19a95b-0": [1.8740215301513672, -3.314676284790039, 2.593822956085205], "a4c342cc95eb423da8221b98fc19a95b-1": [-0.4916333854198456, -2.689568281173706, 4.1730146408081055]}}, {"id": "e0f5acd8123546f2ab1f869a908e02a6-1", "text": "\n\n\"I was feeling a bit under the weather,\" said Granny in an interview with this reporter.", "targets": {"6b005811eb1b414fabcad378977c28a5-0": [1.0940240621566772, -2.9761269092559814, 3.0719475746154785], "be1cf1b911b145a4b8aa41ab99a997b9-8": [2.632443904876709, -3.416933536529541, 1.99199640750885], "be1cf1b911b145a4b8aa41ab99a997b9-12": [0.17809079587459564, -2.501797676086426, 3.4974939823150635], "9d1eb6e14b3d4018a3d31db649948753-4": [-0.5246788263320923, -2.7487735748291016, 4.217756271362305], "9d1eb6e14b3d4018a3d31db649948753-7": [1.7489800453186035, -3.047905445098877, 2.4705796241760254], "763272cf9914487fa897044dee9ffd16-0": [-0.49305459856987, -2.6546568870544434, 4.1389312744140625]}}, {"id": "e0f5acd8123546f2ab1f869a908e02a6-2", "text": " \"But Little Red Riding Hood's visit really lifted my spirits.", "targets": {"6b005811eb1b414fabcad378977c28a5-3": [1.5206029415130615, -2.8166956901550293, 2.442354679107666], "29cc276c385f4ac88d4e2cd59bc293ed-0": [3.678525924682617, -3.7294669151306152, 1.2433052062988281], "a4c342cc95eb423da8221b98fc19a95b-0": [1.8898108005523682, -3.4483516216278076, 2.744699716567993], "a4c342cc95eb423da8221b98fc19a95b-1": [-0.4177156090736389, -2.610990524291992, 4.069944858551025]}}, {"id": "e0f5acd8123546f2ab1f869a908e02a6-3", "text": "\".", "targets": {}}]], "umap": [-1.633483648300171, 5.469257354736328]}, {"id": "02a30f3c04654b85a51a2ce164e6d716", "title": "Granny's Disappearance: Campus Police Search Underway", "paragraphs": [[{"id": "02a30f3c04654b85a51a2ce164e6d716-0", "text": "Campus police have confirmed that a forest dweller was spotted lurking around the Hunt Library building on NC State's campus earlier today.", "targets": {"679b5d1591dd467184d263e80938b867-0": [-1.845828652381897, -2.0362637042999268, 4.471623420715332], "1911be5fbac1421ba9bf55f4f1348a03-0": [-3.5638115406036377, 2.0437371730804443, 1.4180115461349487]}}, {"id": "02a30f3c04654b85a51a2ce164e6d716-1", "text": "\n\n\"We are taking this situation very seriously,\" said Captain James Parker of NC State University Police in an interview with this reporter.", "targets": {"6b005811eb1b414fabcad378977c28a5-10": [-2.9662325382232666, 0.43900632858276367, 2.958007335662842], "1911be5fbac1421ba9bf55f4f1348a03-1": [-2.1858904361724854, -1.572777509689331, 4.3645734786987305]}}, {"id": "02a30f3c04654b85a51a2ce164e6d716-2", "text": " \"We will provide updates as more information becomes available.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-16": [0.4218543767929077, -2.7441112995147705, 3.5065815448760986], "679b5d1591dd467184d263e80938b867-3": [-0.4719409942626953, -2.4615702629089355, 3.978336811065674], "1911be5fbac1421ba9bf55f4f1348a03-2": [-2.795027256011963, -1.3325241804122925, 4.3899054527282715]}}, {"id": "02a30f3c04654b85a51a2ce164e6d716-3", "text": "\" Parker added that the free community event featuring the Minnesota Timberwolvesfor at Hunt Library would happen as planned, however, a greater security presence will be in place.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-17": [0.053064487874507904, -1.4912617206573486, 2.4779129028320312], "f9c13935869c49faa4dfd2e06e9ccca4-33": [2.996642589569092, -3.3718605041503906, 1.5392811298370361], "f9c13935869c49faa4dfd2e06e9ccca4-34": [-0.3936067819595337, -2.78360652923584, 4.142661094665527], "18727b856866490b93755610e5ee9531-3": [3.152935028076172, -3.380549430847168, 1.3806850910186768], "18727b856866490b93755610e5ee9531-9": [0.49895817041397095, -2.5323634147644043, 3.1874940395355225], "18727b856866490b93755610e5ee9531-12": [1.528326392173767, -3.1867990493774414, 2.8506619930267334]}}]], "umap": [-1.8650434017181396, 8.14655590057373]}, {"id": "763272cf9914487fa897044dee9ffd16", "title": "New Evidence Emerges: Second Wolf Implicated", "paragraphs": [[{"id": "763272cf9914487fa897044dee9ffd16-0", "text": "As the investigation into the disappearance of Granny continues, new evidence has emerged that appears to complicate the matter.", "targets": {"6b005811eb1b414fabcad378977c28a5-0": [-0.8360414505004883, -2.3734045028686523, 4.1623735427856445], "be1cf1b911b145a4b8aa41ab99a997b9-8": [1.0634055137634277, -2.5771541595458984, 2.825141191482544], "be1cf1b911b145a4b8aa41ab99a997b9-12": [0.20582477748394012, -2.499687910079956, 3.460050106048584], "9d1eb6e14b3d4018a3d31db649948753-4": [2.81278657913208, -3.543699264526367, 2.0718111991882324], "9d1eb6e14b3d4018a3d31db649948753-7": [1.0137377977371216, -3.026017189025879, 3.2045202255249023], "e0f5acd8123546f2ab1f869a908e02a6-1": [0.9212235808372498, -3.072129726409912, 3.3616342544555664]}}, {"id": "763272cf9914487fa897044dee9ffd16-1", "text": " Reports of another wolf on NC State campus have been circulating throughout the community.", "targets": {"6b005811eb1b414fabcad378977c28a5-1": [-1.2692365646362305, -2.073772668838501, 4.216906547546387], "6b005811eb1b414fabcad378977c28a5-9": [0.5549192428588867, -3.0207269191741943, 3.641312599182129]}}, {"id": "763272cf9914487fa897044dee9ffd16-2", "text": " \n\n\"I'm a friend of Mr.", "targets": {}}, {"id": "763272cf9914487fa897044dee9ffd16-3", "text": " Wuf, or Wufie, as I call him,\" said Michael O'Connell, member of the NC State basketball team, \"He wouldn't do anything to hurt Granny.", "targets": {"6b005811eb1b414fabcad378977c28a5-5": [1.3907380104064941, -3.205040454864502, 3.004997730255127], "be1cf1b911b145a4b8aa41ab99a997b9-5": [0.851012110710144, -2.4036641120910645, 2.6722617149353027], "be1cf1b911b145a4b8aa41ab99a997b9-7": [3.1053059101104736, -3.5695016384124756, 1.6446874141693115], "9d1eb6e14b3d4018a3d31db649948753-3": [0.6518700122833252, -2.289478063583374, 2.7570080757141113]}}, {"id": "763272cf9914487fa897044dee9ffd16-4", "text": " Besides, I'm sure I saw another wolf on my way to class.", "targets": {"29cc276c385f4ac88d4e2cd59bc293ed-1": [-1.6216039657592773, -1.9750547409057617, 4.320610523223877], "50f0fa9bbfc148e0bdde75889b16a8dd-2": [-0.13695508241653442, -2.8205387592315674, 4.01699161529541]}}, {"id": "763272cf9914487fa897044dee9ffd16-5", "text": " Wulfie would never wear blue, and this Wolf, whoever he is, looked like he was repping Duke.", "targets": {"29cc276c385f4ac88d4e2cd59bc293ed-1": [-1.224889874458313, -1.742677927017212, 3.9050779342651367], "50f0fa9bbfc148e0bdde75889b16a8dd-2": [0.14768122136592865, -2.8740744590759277, 3.8251099586486816]}}, {"id": "763272cf9914487fa897044dee9ffd16-6", "text": " That's just not my Wuf.", "targets": {}}, {"id": "763272cf9914487fa897044dee9ffd16-7", "text": "\"\n\nPolice Captain James Parker of NC State University confirmed that they would be reviewing local business and street camera footage for a second wolf that matches O'Connell's description, but encouraged caution while also not jumping to conclusions.", "targets": {"6b005811eb1b414fabcad378977c28a5-1": [-1.8225553035736084, -0.04205313324928284, 2.625729560852051], "6b005811eb1b414fabcad378977c28a5-9": [0.86612868309021, -3.064849853515625, 3.4021124839782715]}}, {"id": "763272cf9914487fa897044dee9ffd16-8", "text": " \"Yes, the Big Bad Syndicate is known for human trafficking and similar kidnappings,\" he said, \"but we are monitoring the situation very closely and request the community stay calm and report any unusual behavior.", "targets": {"6b005811eb1b414fabcad378977c28a5-11": [-3.5033247470855713, 0.2786126732826233, 3.4506261348724365], "be1cf1b911b145a4b8aa41ab99a997b9-9": [0.13328838348388672, -1.2754913568496704, 2.1352732181549072], "be1cf1b911b145a4b8aa41ab99a997b9-10": [-0.10304620862007141, -0.8725148439407349, 2.1569461822509766]}}, {"id": "763272cf9914487fa897044dee9ffd16-9", "text": "\".", "targets": {}}]], "umap": [-2.7868428230285645, 6.933855056762695]}, {"id": "29cc276c385f4ac88d4e2cd59bc293ed", "title": "Little Red Riding Hood's Encounter with a Furry Forest Dweller", "paragraphs": [[{"id": "29cc276c385f4ac88d4e2cd59bc293ed-0", "text": "Little Red Riding Hood's encounter with a suspicious furry character earlier today was nothing short of terrifying, according to eyewitnesses.", "targets": {"6b005811eb1b414fabcad378977c28a5-3": [2.787410020828247, -3.172262191772461, 1.554112195968628], "e0f5acd8123546f2ab1f869a908e02a6-0": [4.057856559753418, -3.5603647232055664, 0.5532968044281006], "e0f5acd8123546f2ab1f869a908e02a6-2": [4.577134132385254, -3.367370367050171, -0.3186971843242645], "a4c342cc95eb423da8221b98fc19a95b-0": [-1.0256376266479492, -2.549787998199463, 4.345706939697266], "a4c342cc95eb423da8221b98fc19a95b-1": [-0.7314764261245728, -2.5737485885620117, 4.245477199554443]}}, {"id": "29cc276c385f4ac88d4e2cd59bc293ed-1", "text": "\n\n\"He was bigger than the wolves I've seen around here,\" said one witness in an interview with this reporter.", "targets": {"763272cf9914487fa897044dee9ffd16-4": [-1.0698003768920898, -2.539921760559082, 4.334253311157227], "763272cf9914487fa897044dee9ffd16-5": [2.920279026031494, -2.9426777362823486, 1.0887455940246582], "50f0fa9bbfc148e0bdde75889b16a8dd-2": [-0.03248277306556702, -2.869723320007324, 3.9730401039123535]}}, {"id": "29cc276c385f4ac88d4e2cd59bc293ed-2", "text": " \"They were shouting.", "targets": {}}, {"id": "29cc276c385f4ac88d4e2cd59bc293ed-3", "text": " It looked like they were fighting about something.", "targets": {}}, {"id": "29cc276c385f4ac88d4e2cd59bc293ed-4", "text": "\".", "targets": {}}]], "umap": [-2.912165403366089, 5.537999629974365]}, {"id": "a4c342cc95eb423da8221b98fc19a95b", "title": "Little Red Riding Hood Speaks Out on Campus Safety", "paragraphs": [[{"id": "a4c342cc95eb423da8221b98fc19a95b-0", "text": "Little Red Riding Hood has spoken out about her harrowing encounter on campus, urging students to be vigilant when walking alone near Poulton or on their way to the Laboratory of Analytic Sciences.", "targets": {"6b005811eb1b414fabcad378977c28a5-3": [0.5398083925247192, -2.406503677368164, 3.060901641845703], "e0f5acd8123546f2ab1f869a908e02a6-0": [2.7564198970794678, -3.708845853805542, 2.1484687328338623], "e0f5acd8123546f2ab1f869a908e02a6-2": [3.005199670791626, -3.364011287689209, 1.503942608833313], "29cc276c385f4ac88d4e2cd59bc293ed-0": [-2.1682400703430176, -1.8330092430114746, 4.390381813049316]}}, {"id": "a4c342cc95eb423da8221b98fc19a95b-1", "text": "\n\n\"I just want everyone to be aware of what's going on around them,\" said Little Red Riding Hood in an interview with this reporter.", "targets": {"6b005811eb1b414fabcad378977c28a5-3": [0.9737612009048462, -2.6662845611572266, 2.877941608428955], "e0f5acd8123546f2ab1f869a908e02a6-0": [1.1965750455856323, -3.3717823028564453, 3.360487937927246], "e0f5acd8123546f2ab1f869a908e02a6-2": [0.10996867716312408, -2.7901594638824463, 3.7735211849212646], "29cc276c385f4ac88d4e2cd59bc293ed-0": [-0.5375977754592896, -2.8012819290161133, 4.197514533996582]}}, {"id": "a4c342cc95eb423da8221b98fc19a95b-2", "text": " \"We need to look out for each other.", "targets": {}}, {"id": "a4c342cc95eb423da8221b98fc19a95b-3", "text": " Even those we thought we could trust.", "targets": {}}, {"id": "a4c342cc95eb423da8221b98fc19a95b-4", "text": "\".", "targets": {}}]], "umap": [-2.294283151626587, 5.224428653717041]}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4", "title": "Dueling Column: Sexy? No. Practical? Yes: The reasons Hill Library is better than Hunt", "paragraphs": [[{"id": "f9c13935869c49faa4dfd2e06e9ccca4-0", "text": "I\u2019m sure everyone on campus has been to D.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-1", "text": "H.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-2", "text": " Hill Jr.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-3", "text": " Library at least once.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-4", "text": " Maybe it was on a tour before you were accepted to NC State, or maybe you\u2019re in there every night, studying until dawn.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-5", "text": " Regardless, you know Hill is the go-to, classic NC State library.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-6", "text": " \n\nI\u2019d say it\u2019s the best library on campus, but Hunt Library isn\u2019t even on main campus, so there\u2019s not much competition for that title.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-7", "text": "\n\nHill has one of the best places to study and work: the bookstacks.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-8", "text": " Head to any of the floors above the third and you\u2019ll find ample, quiet study spaces.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-9", "text": " It feels like exactly what you expect when you think of a library.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-10", "text": " The bookstacks at Hill are almost whimsical places to work and browse the titles of books you\u2019ll never read.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-11", "text": "\n\nMost places to work in Hunt look like a dystopian office space.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-12", "text": " Quite a few of the areas in Hunt seem solely designed to place you, and at least a hundred other people, in front of a desk.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-13", "text": " While this can also be argued about the base floors of Hill, you\u2019re still surrounded by books, lighting and seating that add color and character, and the spaces of isolation aren\u2019t nearly as big.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-14", "text": "\n\nThe closest thing you get to the bookstacks at Hunt is the bookBot, i.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-15", "text": "e.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-16", "text": ", not a study space.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-17", "text": " With a name like the bookBot, you might imagine a cute robot that guides you through the library and gently climbs shelves to retrieve your books.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-18", "text": " That is not at all the case.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-19", "text": "\n\nImagine an awkward shelf that moves across stacked, book-sized shipping containers.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-20", "text": " At least at Hill you can physically find the location of the books you want.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-21", "text": "\n\nNot only does Hill have superior study spaces, but it\u2019s also in a more convenient location.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-22", "text": " If you live on campus, you probably live on main campus, since Centennial Campus only has four places to live.", "targets": {"679b5d1591dd467184d263e80938b867-2": [0.12857381999492645, -3.009530782699585, 3.945570945739746]}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-23", "text": " Maybe you like the idea of feeling stranded in a library that you can\u2019t escape until you finish your work.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-24", "text": " But maybe it\u2019s also nice to have one within walking distance from classes and living.", "targets": {"679b5d1591dd467184d263e80938b867-2": [1.422480821609497, -3.013557195663452, 2.754288673400879]}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-25", "text": "\n\nThe furthest place you could live from Hill on main campus is Wolf Village.", "targets": {"679b5d1591dd467184d263e80938b867-2": [-0.33526697754859924, -2.636110305786133, 4.031214237213135]}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-26", "text": " While it is about a 20 minute walk, there is a direct Wolfline route that takes 10 minutes.", "targets": {"679b5d1591dd467184d263e80938b867-2": [-0.6208264827728271, -2.7312865257263184, 4.242572784423828]}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-27", "text": " Still, most students probably live closer.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-28", "text": "\n\nGoing to Hill also gives you the added benefit of access to Hillsborough Street.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-29", "text": " If you need a break from studying, you can walk for five minutes and go get a bite to eat.", "targets": {"679b5d1591dd467184d263e80938b867-2": [3.4611611366271973, -3.5685853958129883, 1.26468026638031]}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-30", "text": " If nothing on Hillsborough Street sounds good, you can head down to the Atrium as well.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-31", "text": "\n\nNot hungry? Take a quick walk around the Court of North Carolina or by the Hillsborough side of Kilgore and Scott Hall where all the plants are.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-32", "text": "\n\nAn especially underrated aspect of Hill is the Exhibit Gallery.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-33", "text": " The current exhibit is on women\u2019s history at NC State and the prior was on the 100 year anniversary of Technician.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-17": [-0.20342814922332764, -2.789707660675049, 4.029952049255371], "02a30f3c04654b85a51a2ce164e6d716-3": [0.9400068521499634, -3.368497371673584, 3.5436956882476807], "18727b856866490b93755610e5ee9531-3": [4.272490978240967, -3.521301746368408, 0.22831682860851288], "18727b856866490b93755610e5ee9531-9": [-0.8566523790359497, -2.6467843055725098, 4.282188892364502], "18727b856866490b93755610e5ee9531-12": [3.584801197052002, -3.469320297241211, 0.966482400894165]}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-34", "text": " While small, the exhibits are always polished and informative.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-17": [0.06653118878602982, -2.341111183166504, 3.423398971557617], "02a30f3c04654b85a51a2ce164e6d716-3": [-0.25179991126060486, -2.904691696166992, 4.10651969909668], "18727b856866490b93755610e5ee9531-3": [2.366638422012329, -3.3930776119232178, 2.229459762573242], "18727b856866490b93755610e5ee9531-9": [-1.0679082870483398, -2.5286788940429688, 4.322480201721191], "18727b856866490b93755610e5ee9531-12": [0.6448409557342529, -3.181647777557373, 3.682910203933716]}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-35", "text": " There\u2019s also a little section where you can sit and see the Brickyard, which is nice when it isn\u2019t plagued by rampant construction.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-36", "text": " If you haven\u2019t been, definitely check it out.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-37", "text": "\n\nWhile neither of these libraries are winning the sexiest building on campus title, Hunt doesn\u2019t get points for trying.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-38", "text": " Hill is a brick tower, but the view from Hillsborough Street offers a nice preview of the building and fills out the lawn space with tables and chairs.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-39", "text": " Hunt looks like tacky aliens landed their ship there and the architects made it work.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-40", "text": " It feels like it\u2019s supposed to look like something, though I\u2019m not sure what.", "targets": {"679b5d1591dd467184d263e80938b867-1": [1.2874624729156494, -2.7079153060913086, 2.57442569732666], "50f0fa9bbfc148e0bdde75889b16a8dd-4": [2.2389400005340576, -3.143887996673584, 2.0682120323181152]}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-41", "text": "\n\nIt feels like Hunt wants to be the cornerstone library of NC State.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-42", "text": " In reality, it\u2019s the new kid on the block, and it\u2019s trying way too hard.", "targets": {"679b5d1591dd467184d263e80938b867-1": [1.1523699760437012, -2.1734864711761475, 2.1177749633789062], "50f0fa9bbfc148e0bdde75889b16a8dd-4": [0.14029285311698914, -1.8215335607528687, 2.7504730224609375]}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-43", "text": " Hill is a classic, widely accessible library that has stood the test of time.", "targets": {}}, {"id": "f9c13935869c49faa4dfd2e06e9ccca4-44", "text": " Hill Library has earned its title of Best Library.", "targets": {}}]], "umap": [-2.655933141708374, 7.761744022369385]}, {"id": "18727b856866490b93755610e5ee9531", "title": "Raleigh Welcomes the Timberwolves", "paragraphs": [[{"id": "18727b856866490b93755610e5ee9531-0", "text": "The City of Raleigh is thrilled to welcome the Minnesota Timberwolves (NBA) as they bring their exciting brand of basketball to our capital city! In a special fundraising tournament, the Timberwolves will face off against local rivals and opponents from around the country in a thrilling showcase of hoops.", "targets": {}}, {"id": "18727b856866490b93755610e5ee9531-1", "text": "\n\n\"We are beyond honored to have the Minnesota Timberwolves come to Raleigh,\" said Mayor Pro Tem, Sarah Johnson.", "targets": {}}, {"id": "18727b856866490b93755610e5ee9531-2", "text": " \"This is an incredible opportunity for our community to experience top-level basketball while supporting a great cause.", "targets": {}}, {"id": "18727b856866490b93755610e5ee9531-3", "text": "\"\n\nThe tournament, dubbed \"Triangle Thermal Explosion,\" will take place on July 8-10 at PNC Arena in downtown Raleigh.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-17": [0.6533810496330261, -3.029240131378174, 3.5276966094970703], "02a30f3c04654b85a51a2ce164e6d716-3": [0.07107685506343842, -3.067155122756958, 3.983207941055298], "f9c13935869c49faa4dfd2e06e9ccca4-33": [2.758309841156006, -3.314006805419922, 1.7205708026885986], "f9c13935869c49faa4dfd2e06e9ccca4-34": [-0.9481569528579712, -2.5210013389587402, 4.306497573852539]}}, {"id": "18727b856866490b93755610e5ee9531-4", "text": " The event promises to be an electrifying experience for fans of all ages, with the Timberwolves facing off against teams from around the country and a special game against the NC State Men's Basketball team, the Wolfpack.", "targets": {}}, {"id": "18727b856866490b93755610e5ee9531-5", "text": "\n\n\"We're excited to bring our brand of basketball to Raleigh and give back to the community through this special fundraising tournament,\" said Tim Connelly, President of Basketball Operations for the Minnesota Timberwolves.", "targets": {}}, {"id": "18727b856866490b93755610e5ee9531-6", "text": " \"Our team is passionate about engaging with fans and supporting local charities, and we can't wait to get started.", "targets": {}}, {"id": "18727b856866490b93755610e5ee9531-7", "text": "\"\n\nThe Timberwolves will play against a series of opponents in a unique format that combines friendly competition with community outreach.", "targets": {}}, {"id": "18727b856866490b93755610e5ee9531-8", "text": " The tournament's proceeds will benefit local organizations focused on youth education, health initiatives, and family support.", "targets": {}}, {"id": "18727b856866490b93755610e5ee9531-9", "text": " As part of that effort, the team will host a free event for the community at Hunt Library on NC State's campus.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-17": [0.5923152565956116, -1.6743308305740356, 2.053616762161255], "02a30f3c04654b85a51a2ce164e6d716-3": [-0.6061781644821167, -2.770827293395996, 4.208655834197998], "f9c13935869c49faa4dfd2e06e9ccca4-33": [0.37662315368652344, -3.1420114040374756, 3.8603105545043945], "f9c13935869c49faa4dfd2e06e9ccca4-34": [-0.5170434713363647, -2.7164769172668457, 4.173859596252441]}}, {"id": "18727b856866490b93755610e5ee9531-10", "text": "\n\n\"We're looking forward to an incredible event that brings together the best basketball teams from around the country,\" added Connelly.", "targets": {}}, {"id": "18727b856866490b93755610e5ee9531-11", "text": " \"Our fans can expect high-flying action, exciting matchups, hilarious antics from their favorite mascot, Crunch the Wolf, and a chance to give back to the community.", "targets": {}}, {"id": "18727b856866490b93755610e5ee9531-12", "text": "\"\n\nThe Twin Cities Thermal Explosion is presented by Rockfish Research and is made possible through the support of PNC Arena.", "targets": {"be1cf1b911b145a4b8aa41ab99a997b9-17": [0.6584402322769165, -2.951789379119873, 3.4536895751953125], "02a30f3c04654b85a51a2ce164e6d716-3": [-0.5837527513504028, -2.783238649368286, 4.2112531661987305], "f9c13935869c49faa4dfd2e06e9ccca4-33": [1.4539381265640259, -3.215928077697754, 2.9481863975524902], "f9c13935869c49faa4dfd2e06e9ccca4-34": [-1.5803602933883667, -2.251763343811035, 4.430310249328613]}}]], "umap": [-0.9749870300292969, 7.869125843048096]}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd", "title": "NC State men\u2019s basketball head coach Kevin Keatts will not return", "paragraphs": [[{"id": "50f0fa9bbfc148e0bdde75889b16a8dd-0", "text": "NC State Athletics announced in a press release Sunday that men\u2019s basketball head coach Kevin Keatts will not return, effective immediately, after eight seasons with the Wolfpack.", "targets": {}}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd-1", "text": "\n\n\u201cI want to thank Coach Keatts for his contributions to NC State and for always representing the university with class,\u201d said Director of Athletics Boo Corrigan.", "targets": {}}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd-2", "text": " \u201cHe will always have a treasured place in Wolfpack history for the accomplishments of his 2023-24 squad and I appreciate the passion he brought to this role.", "targets": {"763272cf9914487fa897044dee9ffd16-4": [-0.9370007514953613, -2.6004016399383545, 4.300400733947754], "763272cf9914487fa897044dee9ffd16-5": [4.676970481872559, -3.518099069595337, -0.20715628564357758], "29cc276c385f4ac88d4e2cd59bc293ed-1": [-1.2118574380874634, -2.0702667236328125, 4.178873538970947]}}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd-3", "text": " We wish him and his family the best in the future.", "targets": {}}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd-4", "text": "\u201d\n\nIt\u2019s an unprecedented move after an unprecedented season.", "targets": {"679b5d1591dd467184d263e80938b867-1": [-0.2237502932548523, -2.470707893371582, 3.804098129272461], "f9c13935869c49faa4dfd2e06e9ccca4-40": [0.0775202065706253, -2.575387477874756, 3.6630754470825195], "f9c13935869c49faa4dfd2e06e9ccca4-42": [0.04922135919332504, -2.1316168308258057, 3.188854694366455]}}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd-5", "text": " NC State is the first team in NCAA history to miss its conference tournament after winning it and making the Final Four the year before.", "targets": {}}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd-6", "text": "\n\nKeatts joined the Wolfpack in 2017 after back-to-back seasons leading UNC-Wilmington to the NCAA Tournament.", "targets": {}}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd-7", "text": " In his time with the Wolfpack, Keatts had an all-time record of 151-113, a conference record of 69-84, one conference championship and three NCAA Tournament appearances, including last season\u2019s miracle Final Four run.", "targets": {}}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd-8", "text": "\n\nThe Wolfpack failed to build on last season\u2019s success, finishing with a 12-19 record and tying the program\u2019s longest losing streak after nine-straight losses.", "targets": {}}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd-9", "text": " Twice in the last four seasons, Keatts\u2019 teams have recorded win totals of 12 and 11.", "targets": {}}, {"id": "50f0fa9bbfc148e0bdde75889b16a8dd-10", "text": "\n\nThe press release announcing Keatts\u2019 dismissal said a national search for NC State\u2019s next head coach will begin immediately.", "targets": {}}]], "umap": [-0.7569984793663025, 7.2301764488220215]}]}
  </div>

  <!-- ========= JS LOGIC ========= -->
  <script>
    /********************** INITIAL DATA **********************/
    const docData = JSON.parse(document.getElementById('doc-data').textContent || '{}');
    const documents = docData.documents || []; 
    const docIndex = Object.fromEntries(documents.map(d => [d.id, d]));

    /* Elements */
    const $srcSel  = $('#source-selector');
    const $tgtSel  = $('#target-selector');
    const $srcArea = $('#src .content-area');
    const $tgtArea = $('#tgt .content-area');
    const $links   = $('#links');
    const $wrapper = $('#wrapper');

    /* Build source dropdown */
    function fillSelect($sel, list) {
      $sel.empty().append('<option value="">Choose…</option>');
      list.forEach(d => {
        const option = `<option value="${d.id}" title="${d.title}">${d.title}</option>`;
        $sel.append(option);
      });

      $sel.css({
        'text-overflow': 'ellipsis',
        'white-space': 'nowrap',
        'overflow': 'hidden',
        'width': '90%'  // Ensure it uses the full width of its container
      });
    }
    fillSelect($srcSel, documents);

    /* ---------- UMAP Scatter ---------- */
    function buildUmap(){
      const ctx=document.getElementById('umap-canvas').getContext('2d');
      umapChart=new Chart(ctx,{
        type:'scatter',
        data:{datasets:[{data:documents.map(d=>({x:d.umap[0],y:d.umap[1],id:d.id,title:d.title})),backgroundColor:'#cccccc',pointRadius:10}]},
        options:{
          plugins:{
            legend:{display:false},
            tooltip: {
              enabled: true,
              mode: 'nearest',
              intersect: true,
              callbacks: {
                label: function(context) {
                  console.log(context);
                  return context.dataset.data[context.dataIndex].title;
                }
              }
            }
          },
          events:["click", "mouseout", "mousemove", "touchstart", "touchmove"],
          scales:{x:{display:false},
            y:{display:false}},
          onClick: function(_e, els1, c) {
            console.log("CLicked");
            console.log(c.data);
            console.log(c.isDatasetVisible(0));
            //const new_e = _e;
            //new_e.x = umapChart.data.datasets[0].data[0].x;
            //new_e.y = umapChart.data.datasets[0].data[0].y;
            console.log(_e);
            //console.log(c);
            const els = c.getElementsAtEventForMode(_e, 'nearest', { intersect: true }, false);
            console.log(els);
            if(!els.length) return; 
            const id= c.data.datasets[0].data[els[0].index].id; 
            console.log(id);
            loadTargetById(id);
          },
          
        }
      });
    }

    function refreshUmapColors(){
      const sums={};
      sums[currentSourceId] = [255,255,255,1];
      Object.values(linkTable).forEach(map=>{
        Object.entries(map).forEach(([tid,rgb])=>{
          const docId=tid.split('-')[0];
          const vals=rgb;
          if(!sums[docId]) sums[docId]=[0,0,0,0];
          sums[docId][0]+=vals[0]; //Contradiction
          sums[docId][1]+=vals[1]; //Entailment
          sums[docId][2]+=vals[2]; //Neutrality (Alpha channel)
          sums[docId][3] += 1          
        });
      });
      umapChart.data.datasets[0].backgroundColor=umapChart.data.datasets[0].data.map(pt=>{
        if (pt.id == currentSourceId) return `rgb(0,0,0)`;        
        if (!sums[pt.id]) return `rgb(255,255,255)`;
        const c = [
          normalizeToStep(Math.trunc(sums[pt.id][0] / sums[pt.id][3])),
          normalizeToStep(Math.trunc(sums[pt.id][1] / sums[pt.id][3])),
          alphaNorm(Math.trunc(sums[pt.id][2] / sums[pt.id][3]))
        ]||[1,1,240];
        return colorSteps[c[0]][c[1]];// + c[2]; Turn off the alpha channel for clusters
      });
      umapChart.update();
    }

    buildUmap();


    /********************** STATE **********************/
    let linkTable = {};          // srcSentenceId -> { tgtSentenceId: level }
    let currentSourceId = null;
    let currentTargetId = null;

    /********************** RENDERING **********************/    
    // Define color steps
    const colorSteps = [
      ["#e8e8e8", "#ace4e4", "#5ac8c8"], 
      ["#dfb0d6", "#a5add3", "#5698b9"], 
      ["#be64ac", "#8c62aa", "#3b4994"]];
    const TOP = docData.max_val;
    const BOTTOM = docData.min_val;

    // Normalize value to a step of 0, 1, or 2
    const normalizeToStep = (value) => {
      const stepSize = (TOP - BOTTOM) / 3;
      if (value < BOTTOM + stepSize) return 0;
      if (value < BOTTOM + 2 * stepSize) return 1;
      return 2;
    };

    const alphaNorm = (val) => {
        res = Math.trunc((TOP - val) * (130 / (TOP - BOTTOM)) + 125)
        res = Math.min(255, Math.max(25, res))
        return res.toString(16).padStart(2, '0');
    }

    function renderDoc($area, doc, isSource) {
      if (!doc) return;
      if (isSource) linkTable = {};

      const html = [`<h3 class="article-title">${doc.title}</h3>`];
      doc.paragraphs.forEach(p => {
        html.push('<p class="paragraph">');
        p.forEach(({ id, text, targets = {} }) => {
          if (isSource) linkTable[id] = targets;
          const bold = isSource && currentTargetId && Object.keys(targets).some(tid => tid.startsWith(currentTargetId + '-'));
          html.push(`<span class="sentence${bold ? ' source-key' : ''}" id="${id}">${text}</span>`);
        });
        html.push('</p>');
      });
      $area.html(html.join(''));
    }

    function refreshTargetDropdown() {
      const docIds = new Set();
      Object.values(linkTable).forEach(map => Object.keys(map).forEach(tid => docIds.add(tid.split('-')[0])));
      const allowed = documents.filter(d => docIds.has(d.id));
      fillSelect($tgtSel, allowed);
      $tgtSel.prop('disabled', !allowed.length);
      $('#load-target').prop('disabled', true);
    }

    function refreshSourceBold() {
      $('#src .sentence').removeClass('source-key');
      if (!currentTargetId) return;
      Object.entries(linkTable).forEach(([sid, map]) => {
        if (Object.keys(map).some(tid => tid.startsWith(currentTargetId + '-')))
          $('#' + sid).addClass('source-key');
      });
    }

     function preColorTarget() {
        $('#tgt .sentence').css('background-color', '');
        const colored = new Set();
        // Iterate source sentences in DOM order for deterministic first‑seen mapping
        $('#src .sentence').each(function () {
          const sid = this.id;
          const map = linkTable[sid] || {};

          Object.entries(map).forEach(([tid, nli]) => {
            if (colored.has(tid)) return; /* TODO: Average these instead of going with the first */
            if (currentTargetId && tid.startsWith(currentTargetId + '-')) {
              const [c, e, n] = nli;
              const cIndex = normalizeToStep(c);
              const eIndex = normalizeToStep(e);
              const textVal = ['low', 'medium', 'high'];

              // Use these indices to select color from colorSteps
              const color = colorSteps[cIndex][eIndex] + alphaNorm(n);

              $('#' + tid).css('background-color', color);
              // Add a hover to the text with the rga values
              $('#' + tid).attr('title', `Contradiction: ${textVal[cIndex]},\nEntailment: ${textVal[eIndex]},\nNeutrality: ${textVal[normalizeToStep(n)]}`);
              colored.add(tid);
            }
          });
        });
      }

    /********************** CONNECTORS **********************/
    function drawConnectors($left) {
      const box = $wrapper[0].getBoundingClientRect();
      $links.attr({ width: box.width, height: box.height }).empty();
      if (!($left && $left.length)) return;

      const srcR = $left[0].getBoundingClientRect();
      const x1   = srcR.right - box.left;
      const y1   = (srcR.top + srcR.bottom) / 2 - box.top;
      const map  = linkTable[$left.attr('id')] || {};

      Object.keys(map).forEach(tid => {
        const $tgt = $('#' + tid);
        if (!$tgt.length) return;
        const tR = $tgt[0].getBoundingClientRect();
        const x2 = tR.left - box.left;
        const y2 = (tR.top + tR.bottom) / 2 - box.top;
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', x1);
        line.setAttribute('y1', y1);
        line.setAttribute('x2', x2);
        line.setAttribute('y2', y2);
        line.setAttribute('stroke', '#6b7280');
        line.setAttribute('stroke-width', '1.3');
        line.setAttribute('stroke-opacity', '0.75');
        $links[0].appendChild(line);
      });
    }

    function activate($left) {
      // Clear previous highlights & paragraph backgrounds
      $('#src .sentence, #tgt .sentence').removeClass('active');
      if (!($left && $left.length)) { drawConnectors(null); return; }

      // Highlight selected source sentence
      $left.addClass('active');

      // Apply RGB backgrounds to linked target paragraphs
      const map = linkTable[$left.attr('id')] || {};
      Object.entries(map).forEach(([tid, rgb]) => {
        const $tSent = $('#' + tid);
        if ($tSent.length) {
          $tSent.addClass('active');
          $tSent.css('background-color', rgb);
        }
      });

      drawConnectors($left);
    }

    /********************** SCROLL & CLICK SYNC **********************/
    const scrollTo = ($c, $e) => { if ($e && $e.length) $c.stop().animate({ scrollTop: $e.position().top + $c.scrollTop() - 20 }, 200); };

   function leftSelect($l) {
      activate($l);
      const map = linkTable[$l?.attr('id')] || {};
      const tgtIdsInCurrent = Object.keys(map)
            .filter(tid => currentTargetId && tid.startsWith(currentTargetId + '-'));
      const firstId = tgtIdsInCurrent[0];
      scrollTo($tgtArea, $('#' + firstId));
    }

    function rightSelect($r) {
      const srcId = Object.keys(linkTable).find(sid => linkTable[sid][$r.attr('id')]);
      if (srcId) leftSelect($('#' + srcId));
    }

    function tryInit() {
      const $left = $('#src .sentence.source-key').first();
      if ($left.length) leftSelect($left);
    }

    /********************** LOAD HELPERS **********************/
    function loadSourceById(id) {
      if (!id) return;
      currentSourceId = id;
      currentTargetId = null;
      renderDoc($srcArea, docIndex[id], true);
      refreshTargetDropdown();
      refreshSourceBold();      
      refreshUmapColors();
      tryInit();
    }

    function loadTargetById(id) {
      if (!id) return;
      currentTargetId = id;
      renderDoc($tgtArea, docIndex[id], false);  
      refreshSourceBold();
      preColorTarget();
      tryInit();
    }

    /********************** EVENT BINDINGS **********************/
    // Enable buttons on selection
    $srcSel.on('change', () => $('#load-source').prop('disabled', !$srcSel.val()));
    $tgtSel.on('change', () => $('#load-target').prop('disabled', !$tgtSel.val()));

    // Load buttons
    $('#load-source').on('click', () => loadSourceById($srcSel.val()));
    $('#load-target').on('click', () => loadTargetById($tgtSel.val()));

    // Swap button
    $('#swap-btn').on('click', () => {
      if (!currentSourceId || !currentTargetId) return;
      const oldSrc = currentSourceId;
      const oldTgt = currentTargetId;
      $srcSel.val(oldTgt);
      $tgtSel.val(oldSrc);
      loadSourceById(oldTgt);
      loadTargetById(oldSrc);
    });

    // Sentence clicks
    $('#src').on('click', '.sentence', e => leftSelect($(e.currentTarget)));
    $('#tgt').on('click', '.sentence', e => rightSelect($(e.currentTarget)));

    // Scroll listeners attached directly to scrolling panes
    $srcArea.on('scroll', () => drawConnectors($('#src .sentence.active')));
    $tgtArea.on('scroll', () => drawConnectors($('#src .sentence.active')));

    // Window resize
    $(window).on('resize', () => drawConnectors($('#src .sentence.active')));

    // Help toggle
    $('#help-toggle').on('click', function () {
      $('#help-panel').slideToggle(180);
      $(this).text($('#help-panel').is(':visible') ? 'Help ▴' : 'Help ▾');
    });
  </script>
</body>
</html>
